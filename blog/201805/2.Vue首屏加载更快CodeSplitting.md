目前前端三大框架Vue、React、Angular均采用单页面SPA方式打包前端代码。默认Webpack会包JS代码打包成一个很大chunk，导致单页面首屏加载会很慢。

考虑将JS代码按模块打包，这样需要某块代码或者组件时再去加载它，这样网页可以加载更快，同事还可以利用浏览器缓存去加载缓存过文件。

**Code Splitting 怎么做**
主要是有两种方式：
- 分离业务代码和第三方库（vendor）
- 按需加载（利用import）

当只有一个chuck就是app.js,他是一个 entry chunk.
```
// webpack.config.js
module.exports = {
  entry: {
     app: './src/main.js', // entry chunk
  },
}
```
app.js 包含了我们的第三方库 vue 和 axios ，以及我们的业务代码 src 。

接下来，我们要把他们分离开。

**分离 Vendor**
最简单方法就是：加一个 entry 
```
// webpack.config.js
module.exports = {
  entry: {
    app: './src/main.js',
    vendor: ['vue', 'axios'],
  },
}
```

虽然 vendor.js 这个 entry chunk 包含了我们想要的 vue 和 axios ，但是细心的同学会发现， app.js 也包含了他们！为什么！？

其实这是很正常的事情：每个 entry 都包含了他自己的依赖，这样他才能作为一个入口，独立地跑起来。

很难受，事实上我们并不想 app.js 还包含了 vue 和 axios 。如果可以把他们俩相同的依赖提取出来就好了，就像这样：

#### CommonsChunkPlugin

如果想要提取公共模块的话，就需要用到 CommonsChunkPlugin 这个插件。
现在，修改我们的 webpack 配置文件（ File Changes ）：
```
new webpack.optimize.CommonsChunkPlugin({
  name: 'vendor',
}),
```
- 所有的 chunk（ app.js 和 vendor.js ）中，app.js 和 vendor.js 都引用了 vue 和 axios
- 加起来2次，那把他们都移动到 vendor.js 里面。
- 最后，app.js 原本包含的 vue 和 axios 都移动到了 vendor.js 。

app.js 这个 chunk 再也没有包含第三方库了，只剩下业务代码。

但是！随着业务的增长，我们依赖的第三方库代码很可能会越来越多，这时候我们的 webpack.config.js 就变成这样了：
```
module.exports = {
  entry: {
    app: './src/main.js',
    vendor: [
      'vue',
      'axio',
      'vue-router',
      'vuex',
      'element-ui',
      // 很长很长
    ],
  },
}
```
vendor entry 会变成很长很长，更糟糕的是，我们每次引入了新的第三方库，都需要在 vendor 手动增加对应的包名。


[原文摘自饿了么大前端团队](https://zhuanlan.zhihu.com/p/26710831)