<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h1>路由通过history API实现的原理</h1>
    <article id="app"></article>
    <a class="api a">a.html</a>
    <a class="api b">b.html</a>
    
    <script type="text/javascript"> 
        // 注册路由
        document.querySelectorAll('.api').forEach(item =>{
            item.addEventListener('click',(e)=>{
                e.preventDefault();
                let link = item.textContent;
                window.history.pushState({name:'api', link, link})
            },false)
        })

        //监听路由 
        window.addEventListener('popstate',(e)=>{
            console.log({
                location:location.href,
                state:e.state
            },false)
        }) 
    </script>

    <h3>Hash</h3>
    <a class="hash a">#a.html</a>
    <a class="hash b">#b.html</a>
    <script type="text/javascript"> 
        // 注册路由
        document.querySelectorAll('.hash').forEach(item =>{
            item.addEventListener('click',(e)=>{
                e.preventDefault();
                let link = item.textContent;
                location.hash = link; 
            },false)
        })

        //监听路由 
        window.addEventListener('hashchange',(e)=>{  
            console.log({
                location:location.href,
                hash:location.hash
            },false)
        }) 
    </script>
</body>
</html>