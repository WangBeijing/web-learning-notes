## 什么是以太坊

比特币的设计只适合虚拟货币的场景，由于存在这非图灵完备性，缺少保存状态的账户概念，以及PoW挖矿机制所带来的资源浪费和效率问题，在很多区块链应用场景下并不使用。人们需要一个新的基于区块链的具有图灵完备性、高效共识机制、支持更多应用场景的智能合约开发平台。以太坊在这情况下而生。

以太坊是个平台和编程语言，包括数字货币以太币（Ether），以及用来构建和发布分布式应用的以太脚本（EtherScript）。从最底层角度来看，以太坊是一个多层的、基于密码学的开源技术协议。作为一个整体，它是一个创建和部署去中心化应用的综合平台。不同于比特币是，在以太坊上可以任意编写智能合约，通过智能合约实现强大的功能，实现去中心化的应用开发。在以太坊上部署的智能合约运行在以太坊特有的虚拟机上，通过以太坊虚拟机和RPC接口底层区块链进行交互。

以太坊的总体系统架构图。
![images](https://github.com/WangBeijing/webBlog/blob/master/%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF/images/1351538398807.jpg?raw=true)

## 以太坊技术
#### 1.以太坊核心概念
（1）以太坊虚拟机
（2）账户
（3）消息
（4）交易
（5）Gas
（6）存储、主存和栈
（7）指令集
（8）消息调用
（9）代码调用和库

#### 2.以太坊的状态转换
以太坊的状态转换是指在一个交易（TX）发生时，以太坊从一个正确的状态（S）转变到下一个正确状态（S`）的转换过程。

以太坊的状态转换函数为APPLY(S、TX)->S`，可以定义如下：
- 1）检查交易的格式否是正确，签名是否有效，以及随机数是否与发送者账户的随机数匹配。如否，返回错误
- 2）计算交易费用fee=SRATGAS*GASPRICE，并从签名中减去交易费用和增加发送者的随机数。如果账户余额不足，返回错误。
- 3）设定初值Gas=SRATGA并根据交易中的字节数减去一定量的燃料值
- 4）从发送者的账户转移价值到接受者账户
- 5）如果因为发送者账户没有足够的费用或者代码执行耗尽燃料导致价值转移失败，恢复原来的状态，但是还需要支付交易费用，交易费用加至矿工账户
- 6）若代码执行成功，将所有剩余的燃料归还给发送者，消耗掉的燃料作为交易费用发送给矿工。

合约也可以通过对它产生的子计算设置严格的限制，保护它们的设计资源

#### 3.以太坊客户端
目前4种语言编写的以太坊客户端
- GO客户端Geth
- C++客户端ETH
- Python客户端Pyehtapp
- Java客户端EthereumJ

Go语言版是以太坊官方一直维护并推荐使用的客户端

以太坊包括一个专用的客户端浏览器，使得用户可以运行各种各样的去中心化应用（DApp），发布智能合约。这浏览器成为Mist，易于使用。Mist由特殊的安全层、密钥管理、去中心化账户管理和区块链相关的组件几部分组成。可以在Mist中使用DApp，就像通过常规浏览器与网站进行交互一样。

### 以太坊智能合约
#### 1.智能合约
以太坊首先实现了区块链和智能合约的完整契合

以太坊是内置有图灵完备编程语言的区块链，通过建立抽象的基础层，使得任何人都能够创建合约和去中心化应用，并在其中设立他们自由定义的所有权规则、交易方式和状态转换函数。

#### 2.开发语言
以太坊软件开发语言是其最大特性之一，因为对区块链进行编程是一项首要目标。以太坊具有4种专用语言：
- Serpent
- Solidity
- Mutan
- LLL

都是为面向合约编程而从底层开始设计的语言，Solidity是以太坊的首选语言。

用以太坊，我们可以在实时的区块链上，根据一个地址情况实时查看当前账户情况的交易状态

#### 3.代码执行
以太坊合约的代码是使用低级的基于堆栈的字节码的语言写成的，被称为‘以太坊虚拟机代码’或者‘EVM代码’。代码由一系列字节构成，每一个字节代码一种操作。

操作可以访问3种存储数据的空间：
- 1）堆栈
- 2）内存
- 3）合约的长期存储

代码可以像访问区块头数据一样访问数值、发送和接受到的消息中的数据，代码还可以返回数据的字节队列作为输出。

### 以太坊的去中心化应用
**1.什么是DApp**

一个DApp是由智能合约和客户端代码构成。

从架构角度而言，DApp非常类似于传统的Web应用。主要区别是：在传统Web应用中，客户端有JavaScript代码，由用户在自己的浏览器中执行；服务器端的代码由主机运行。但是在一个DApp中，它的智能逻辑运行在区块链上，客户端代码运行在特殊浏览器Mist里面。

**2.应用举例**
- Augur(www.augur.net),一个正在开发去中心化预测系统
- Maker（www.makerdao.com）一个正在开发中的金融类去中心化自治组织
- WeiFund一个正在开发中的去中心化众筹平台
- Boardroom一个正在开发中的DAO管理平台
- Ujo Music一个音乐版权管理平台，测试版
- 贷劵

### 基于区块链的电子货币
#### 元币平台
元币是衍生于现有加密货币体系之上，更专注于业务系统的代币种类
- （1）彩币
- （2）万事达币
- （3）合约币

#### 代币
大多数代币都是比特币衍生出来的。莱特币本身又被作为代币的母币，衍生出更多新的代币，同样方式诞生的还有代链这个概念。两者区别在于，代币用作货币目的，代链用于非货币目的。

代币的创建过程非常简单，通过修改比特币的一些参数，加速货币的产生速度。

**1.通过货币参数修改而建立的代币**
- （1）莱特币
- （2）狗狗币
- （3）运输币
**2.基于共识机制的创新而建立的代码**

- （1）点点币
- （2）Myriad
- （3）黑币
- （4）维理币
- （5）未币
**3.通过双目标挖矿机制创新而建立的代码**
- （1）质数币
- （2）治疗币
- （3）格雷德币
**4.注重隐私性的代币**
- （1）零币
- （2）百特币
- （3）门罗币XMR

> 小结：主要介绍了区块链技术的基础知识，首先介绍了区块链技术，包括区块链技术的基本概念、框架与特点。介绍比特币概念、原理、隐私模型。又介绍了一个重要应用-以太坊，介绍了以太坊技术、以太坊智能合约、以太坊去中心化应用、以太坊发展的现状及未来。

